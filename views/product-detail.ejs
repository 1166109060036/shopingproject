<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= product.product_name %> | CyloCity</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #f8f9fa, #e0e0e0);
      font-family: "Prompt", sans-serif;
      color: #333;
    }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö */
    .btn-back {
      border-radius: 20px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .btn-back:hover {
      background: #a00000;
      color: #fff !important;
    }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
    .card {
      border: none;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      overflow: hidden;
    }

    .card img {
      border-top-left-radius: 20px;
      border-bottom-left-radius: 20px;
      height: 100%;
      object-fit: cover;
    }

    /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
    .product-name {
      font-size: 2rem;
      font-weight: 700;
      color: #a00000;
    }
    .product-desc {
      font-size: 1.1rem;
      color: #555;
    }

    .price-tag {
      font-size: 1.8rem;
      color: #a00000;
      font-weight: 700;
      text-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏¢‡∏¥‡∏ö‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ */
    .btn-success {
      background: linear-gradient(135deg, #28a745, #20c997);
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      transition: transform 0.2s ease;
    }
    .btn-success:hover {
      transform: scale(1.05);
    }

    /* ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
    .quantity-selector {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .quantity-selector button {
      width: 40px;
      height: 40px;
      font-size: 20px;
      border-radius: 50%;
      border: 1px solid #a00000;
      color: #a00000;
      background: white;
      transition: all 0.2s;
    }
    .quantity-selector button:hover {
      background: #a00000;
      color: white;
    }
    .quantity-selector input {
      text-align: center;
      width: 70px;
      font-size: 1.1rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      padding: 5px;
    }

    /* ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° */
    .info-section {
      margin-top: 50px;
    }
    .info-section h4 {
      font-weight: 700;
      color: #a00000;
    }
    .info-section p {
      color: #555;
    }
  </style>
</head>

<body>
  <div class="container mt-5 pt-5">
    <a href="/products" class="btn btn-outline-danger btn-back mb-4">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>

    <div class="card shadow-lg">
      <div class="row g-0">
        <div class="col-md-6">
          <% if (product.image) { %>
            <img src="<%= product.image %>" class="img-fluid" alt="<%= product.product_name %>">
          <% } else { %>
            <div class="bg-secondary text-white text-center p-5">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>
          <% } %>
        </div>

        <div class="col-md-6 p-4 d-flex flex-column justify-content-center">
          <h2 class="product-name mb-3"><%= product.product_name %></h2>
          <p class="product-desc mb-4"><%= product.description %></p>

          <h3 class="price-tag mb-3">‡∏ø <%= product.price %></h3>

          <p class="<%= product.quantity > 0 ? 'text-success' : 'text-danger' %> fw-bold mb-3">
            <%= product.quantity > 0 ? '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á: ' + product.quantity : '‡∏´‡∏°‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å' %>
          </p>

          <% if (product.quantity > 0) { %>
            <form action="/add-to-cart/<%= product.product_id %>" method="POST" onsubmit="injectUserId()">
              <input type="hidden" name="userId" id="userIdInput">
              <div class="quantity-selector mb-3">
                <button type="button" onclick="changeQuantity(-1)">‚àí</button>
                <input type="number" name="quantity" id="quantity" min="1" max="<%= product.quantity %>" value="1">
                <button type="button" onclick="changeQuantity(1)">+</button>
              </div>
              <button type="submit" class="btn btn-success w-100 py-2">
                üõí ‡∏´‡∏¢‡∏¥‡∏ö‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
              </button>
            </form>
          <% } else { %>
            <button class="btn btn-secondary w-100 py-2" disabled>‡∏´‡∏°‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å</button>
          <% } %>
        </div>
      </div>
    </div>

    
    </div>
  </div>

  <script>
    function changeQuantity(delta) {
      const input = document.getElementById('quantity');
      let current = parseInt(input.value);
      const min = parseInt(input.min);
      const max = parseInt(input.max);
      let updated = current + delta;
      if (updated < min) updated = min;
      if (updated > max) updated = max;
      input.value = updated;
    }

    function injectUserId() {
      const userId = localStorage.getItem('userId');
      document.getElementById('userIdInput').value = userId;
    }
  </script>
</body>
</html>
